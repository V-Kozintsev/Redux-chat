/*! For license information please see main.26ff291064f0f990e119.js.LICENSE.txt */
(()=>{"use strict";var e={};function t(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var r=e.g.document;if(!t&&r&&(r.currentScript&&"SCRIPT"===r.currentScript.tagName.toUpperCase()&&(t=r.currentScript.src),!t)){var n=r.getElementsByTagName("script");if(n.length)for(var o=n.length-1;o>-1&&(!t||!/^http(s?):/.test(t));)t=n[o--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();var r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")(),n=()=>Math.random().toString(36).substring(7).split("").join("."),o={INIT:`@@redux/INIT${n()}`,REPLACE:`@@redux/REPLACE${n()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${n()}`};function i(e){if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function c(e,n,a){if("function"!=typeof e)throw new Error(t(2));if("function"==typeof n&&"function"==typeof a||"function"==typeof a&&"function"==typeof arguments[3])throw new Error(t(0));if("function"==typeof n&&void 0===a&&(a=n,n=void 0),void 0!==a){if("function"!=typeof a)throw new Error(t(1));return a(c)(e,n)}let s=e,u=n,f=new Map,l=f,p=0,d=!1;function h(){l===f&&(l=new Map,f.forEach(((e,t)=>{l.set(t,e)})))}function y(){if(d)throw new Error(t(3));return u}function m(e){if("function"!=typeof e)throw new Error(t(4));if(d)throw new Error(t(5));let r=!0;h();const n=p++;return l.set(n,e),function(){if(r){if(d)throw new Error(t(6));r=!1,h(),l.delete(n),f=null}}}function g(e){if(!i(e))throw new Error(t(7));if(void 0===e.type)throw new Error(t(8));if("string"!=typeof e.type)throw new Error(t(17));if(d)throw new Error(t(9));try{d=!0,u=s(u,e)}finally{d=!1}return(f=l).forEach((e=>{e()})),e}return g({type:o.INIT}),{dispatch:g,subscribe:m,getState:y,replaceReducer:function(e){if("function"!=typeof e)throw new Error(t(10));s=e,g({type:o.REPLACE})},[r]:function(){const e=m;return{subscribe(r){if("object"!=typeof r||null===r)throw new Error(t(11));function n(){const e=r;e.next&&e.next(y())}return n(),{unsubscribe:e(n)}},[r](){return this}}}}}function a(...e){return 0===e.length?e=>e:1===e.length?e[0]:e.reduce(((e,t)=>(...r)=>e(t(...r))))}function s(e){return({dispatch:t,getState:r})=>n=>o=>"function"==typeof o?o(t,r,e):n(o)}var u=s(),f=s,l=Symbol.for("immer-nothing"),p=Symbol.for("immer-draftable"),d=Symbol.for("immer-state");function h(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var y=Object.getPrototypeOf;function m(e){return!!e&&!!e[d]}function g(e){return!!e&&(w(e)||Array.isArray(e)||!!e[p]||!!e.constructor?.[p]||S(e)||j(e))}var v=Object.prototype.constructor.toString();function w(e){if(!e||"object"!=typeof e)return!1;const t=y(e);if(null===t)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===v}function b(e,t){0===_(e)?Reflect.ownKeys(e).forEach((r=>{t(r,e[r],e)})):e.forEach(((r,n)=>t(n,r,e)))}function _(e){const t=e[d];return t?t.type_:Array.isArray(e)?1:S(e)?2:j(e)?3:0}function E(e,t){return 2===_(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function O(e,t,r){const n=_(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function S(e){return e instanceof Map}function j(e){return e instanceof Set}function x(e){return e.copy_||e.base_}function P(e,t){if(S(e))return new Map(e);if(j(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=w(e);if(!0===t||"class_only"===t&&!r){const t=Object.getOwnPropertyDescriptors(e);delete t[d];let r=Reflect.ownKeys(t);for(let n=0;n<r.length;n++){const o=r[n],i=t[o];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[o]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[o]})}return Object.create(y(e),t)}{const t=y(e);if(null!==t&&r)return{...e};const n=Object.create(t);return Object.assign(n,e)}}function C(e,t=!1){return T(e)||m(e)||!g(e)||(_(e)>1&&(e.set=e.add=e.clear=e.delete=k),Object.freeze(e),t&&Object.entries(e).forEach((([e,t])=>C(t,!0)))),e}function k(){h(2)}function T(e){return Object.isFrozen(e)}var N,L={};function R(e){const t=L[e];return t||h(0),t}function M(){return N}function A(e,t){t&&(R("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function D(e){z(e),e.drafts_.forEach(F),e.drafts_=null}function z(e){e===N&&(N=e.parent_)}function I(e){return N={drafts_:[],parent_:N,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function F(e){const t=e[d];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function B(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return void 0!==e&&e!==r?(r[d].modified_&&(D(t),h(4)),g(e)&&(e=$(t,e),t.parent_||W(t,e)),t.patches_&&R("Patches").generateReplacementPatches_(r[d].base_,e,t.patches_,t.inversePatches_)):e=$(t,r,[]),D(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==l?e:void 0}function $(e,t,r){if(T(t))return t;const n=t[d];if(!n)return b(t,((o,i)=>U(e,n,t,o,i,r))),t;if(n.scope_!==e)return t;if(!n.modified_)return W(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const t=n.copy_;let o=t,i=!1;3===n.type_&&(o=new Set(t),t.clear(),i=!0),b(o,((o,c)=>U(e,n,t,o,c,r,i))),W(e,t,!1),r&&e.patches_&&R("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function U(e,t,r,n,o,i,c){if(m(o)){const c=$(e,o,i&&t&&3!==t.type_&&!E(t.assigned_,n)?i.concat(n):void 0);if(O(r,n,c),!m(c))return;e.canAutoFreeze_=!1}else c&&r.add(o);if(g(o)&&!T(o)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;$(e,o),t&&t.scope_.parent_||"symbol"==typeof n||!Object.prototype.propertyIsEnumerable.call(r,n)||W(e,o)}}function W(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&C(t,r)}var X={get(e,t){if(t===d)return e;const r=x(e);if(!E(r,t))return function(e,t,r){const n=V(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}(e,r,t);const n=r[t];return e.finalized_||!g(n)?n:n===G(e.base_,t)?(H(e),e.copy_[t]=J(n,e)):n},has:(e,t)=>t in x(e),ownKeys:e=>Reflect.ownKeys(x(e)),set(e,t,r){const n=V(x(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const n=G(x(e),t),c=n?.[d];if(c&&c.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(((o=r)===(i=n)?0!==o||1/o==1/i:o!=o&&i!=i)&&(void 0!==r||E(e.base_,t)))return!0;H(e),q(e)}var o,i;return e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==G(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,H(e),q(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const r=x(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty(){h(11)},getPrototypeOf:e=>y(e.base_),setPrototypeOf(){h(12)}},K={};function G(e,t){const r=e[d];return(r?x(r):e)[t]}function V(e,t){if(!(t in e))return;let r=y(e);for(;r;){const e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=y(r)}}function q(e){e.modified_||(e.modified_=!0,e.parent_&&q(e.parent_))}function H(e){e.copy_||(e.copy_=P(e.base_,e.scope_.immer_.useStrictShallowCopy_))}function J(e,t){const r=S(e)?R("MapSet").proxyMap_(e,t):j(e)?R("MapSet").proxySet_(e,t):function(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:M(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=n,i=X;r&&(o=[n],i=K);const{revoke:c,proxy:a}=Proxy.revocable(o,i);return n.draft_=a,n.revoke_=c,a}(e,t);return(t?t.scope_:M()).drafts_.push(r),r}function Y(e){if(!g(e)||T(e))return e;const t=e[d];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=P(e,t.scope_.immer_.useStrictShallowCopy_)}else r=P(e,!0);return b(r,((e,t)=>{O(r,e,Y(t))})),t&&(t.finalized_=!1),r}b(X,((e,t)=>{K[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),K.deleteProperty=function(e,t){return K.set.call(this,e,t,void 0)},K.set=function(e,t,r){return X.set.call(this,e[0],t,r,e[0])};var Q=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,r)=>{if("function"==typeof e&&"function"!=typeof t){const r=t;t=e;const n=this;return function(e=r,...o){return n.produce(e,(e=>t.call(this,e,...o)))}}let n;if("function"!=typeof t&&h(6),void 0!==r&&"function"!=typeof r&&h(7),g(e)){const o=I(this),i=J(e,void 0);let c=!0;try{n=t(i),c=!1}finally{c?D(o):z(o)}return A(o,r),B(n,o)}if(!e||"object"!=typeof e){if(n=t(e),void 0===n&&(n=e),n===l&&(n=void 0),this.autoFreeze_&&C(n,!0),r){const t=[],o=[];R("Patches").generateReplacementPatches_(e,n,t,o),r(t,o)}return n}h(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...r)=>this.produceWithPatches(t,(t=>e(t,...r)));let r,n;return[this.produce(e,t,((e,t)=>{r=e,n=t})),r,n]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){var t;g(e)||h(8),m(e)&&(m(t=e)||h(10),e=Y(t));const r=I(this),n=J(e,void 0);return n[d].isManual_=!0,z(r),n}finishDraft(e,t){const r=e&&e[d];r&&r.isManual_||h(9);const{scope_:n}=r;return A(n,t),B(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));const n=R("Patches").applyPatches_;return m(e)?n(e,t):this.produce(e,(e=>n(e,t)))}},Z=Q.produce;Q.produceWithPatches.bind(Q),Q.setAutoFreeze.bind(Q),Q.setUseStrictShallowCopy.bind(Q),Q.applyPatches.bind(Q),Q.createDraft.bind(Q),Q.finishDraft.bind(Q);var ee="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?a:a.apply(null,arguments)};function te(e,t){function r(...r){if(t){let n=t(...r);if(!n)throw new Error(he(0));return{type:e,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:e,payload:r[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=t=>function(e){return i(e)&&"type"in e&&"string"==typeof e.type}(t)&&t.type===e,r}"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;var re=class e extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(...e){return super.concat.apply(this,e)}prepend(...t){return 1===t.length&&Array.isArray(t[0])?new e(...t[0].concat(this)):new e(...t.concat(this))}};function ne(e){return g(e)?Z(e,(()=>{})):e}function oe(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}var ie=e=>t=>{setTimeout(t,e)};function ce(e){const t={},r=[];let n;const o={addCase(e,r){const n="string"==typeof e?e:e.type;if(!n)throw new Error(he(28));if(n in t)throw new Error(he(29));return t[n]=r,o},addMatcher:(e,t)=>(r.push({matcher:e,reducer:t}),o),addDefaultCase:e=>(n=e,o)};return e(o),[t,r,n]}var ae=Symbol.for("rtk-slice-createasyncthunk");function se(e,t){return`${e}/${t}`}function ue({creators:e}={}){const t=e?.asyncThunk?.[ae];return function(e){const{name:r,reducerPath:n=r}=e;if(!r)throw new Error(he(11));const o=("function"==typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name]:(...t)=>e(...t)}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},i=Object.keys(o),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},a={addCase(e,t){const r="string"==typeof e?e:e.type;if(!r)throw new Error(he(12));if(r in c.sliceCaseReducersByType)throw new Error(he(13));return c.sliceCaseReducersByType[r]=t,a},addMatcher:(e,t)=>(c.sliceMatchers.push({matcher:e,reducer:t}),a),exposeAction:(e,t)=>(c.actionCreators[e]=t,a),exposeCaseReducer:(e,t)=>(c.sliceCaseReducersByName[e]=t,a)};function s(){const[t={},r=[],n]="function"==typeof e.extraReducers?ce(e.extraReducers):[e.extraReducers],o={...t,...c.sliceCaseReducersByType};return function(e){let t,[i,a,s]=ce((e=>{for(let t in o)e.addCase(t,o[t]);for(let t of c.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of r)e.addMatcher(t.matcher,t.reducer);n&&e.addDefaultCase(n)}));if("function"==typeof e)t=()=>ne(e());else{const r=ne(e);t=()=>r}function u(e=t(),r){let n=[i[r.type],...a.filter((({matcher:e})=>e(r))).map((({reducer:e})=>e))];return 0===n.filter((e=>!!e)).length&&(n=[s]),n.reduce(((e,t)=>{if(t){if(m(e)){const n=t(e,r);return void 0===n?e:n}if(g(e))return Z(e,(e=>t(e,r)));{const n=t(e,r);if(void 0===n){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return n}}return e}),e)}return u.getInitialState=t,u}(e.initialState)}i.forEach((n=>{const i=o[n],c={reducerName:n,type:se(r,n),createNotation:"function"==typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(i)?function({type:e,reducerName:t,createNotation:r},n,o){let i,c;if("reducer"in n){if(r&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(n))throw new Error(he(17));i=n.reducer,c=n.prepare}else i=n;o.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,c?te(e,c):te(e))}(c,i,a):function({type:e,reducerName:t},r,n,o){if(!o)throw new Error(he(18));const{payloadCreator:i,fulfilled:c,pending:a,rejected:s,settled:u,options:f}=r,l=o(e,i,f);n.exposeAction(t,l),c&&n.addCase(l.fulfilled,c),a&&n.addCase(l.pending,a),s&&n.addCase(l.rejected,s),u&&n.addMatcher(l.settled,u),n.exposeCaseReducer(t,{fulfilled:c||pe,pending:a||pe,rejected:s||pe,settled:u||pe})}(c,i,a,t)}));const u=e=>e,f=new Map;let l;function p(e,t){return l||(l=s()),l(e,t)}function d(){return l||(l=s()),l.getInitialState()}function h(t,r=!1){function n(e){let n=e[t];return void 0===n&&r&&(n=d()),n}function o(t=u){const n=oe(f,r,(()=>new WeakMap));return oe(n,t,(()=>{const n={};for(const[o,i]of Object.entries(e.selectors??{}))n[o]=fe(i,t,d,r);return n}))}return{reducerPath:t,getSelectors:o,get selectors(){return o(n)},selectSlice:n}}const y={name:r,reducer:p,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:d,...h(n),injectInto(e,{reducerPath:t,...r}={}){const o=t??n;return e.inject({reducerPath:o,reducer:p},r),{...y,...h(o,!0)}}};return y}}function fe(e,t,r,n){function o(o,...i){let c=t(o);return void 0===c&&n&&(c=r()),e(c,...i)}return o.unwrapped=e,o}var le=ue();function pe(){}var{assign:de}=Object;function he(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}Symbol.for("rtk-state-proxy-original");const ye=e.p+"assets/images/smiley.802e4e1c1149810376f6.png",me=e.p+"assets/images/sad.5858c622ba965019e88c.png",ge=e.p+"assets/images/laugh.0d4586a69faacfb46b9e.png";var ve=e=>Array.isArray(e)?e:[e];Symbol(),Object.getPrototypeOf({});var we="undefined"!=typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}};function be(e,t={}){let r={s:0,v:void 0,o:null,p:null};const{resultEqualityCheck:n}=t;let o,i=0;function c(){let t=r;const{length:c}=arguments;for(let e=0,r=c;e<r;e++){const r=arguments[e];if("function"==typeof r||"object"==typeof r&&null!==r){let e=t.o;null===e&&(t.o=e=new WeakMap);const n=e.get(r);void 0===n?(t={s:0,v:void 0,o:null,p:null},e.set(r,t)):t=n}else{let e=t.p;null===e&&(t.p=e=new Map);const n=e.get(r);void 0===n?(t={s:0,v:void 0,o:null,p:null},e.set(r,t)):t=n}}const a=t;let s;if(1===t.s)s=t.v;else if(s=e.apply(null,arguments),i++,n){const e=o?.deref?.()??o;null!=e&&n(e,s)&&(s=e,0!==i&&i--),o="object"==typeof s&&null!==s||"function"==typeof s?new we(s):s}return a.s=1,a.v=s,s}return c.clearCache=()=>{r={s:0,v:void 0,o:null,p:null},c.resetResultsCount()},c.resultsCount=()=>i,c.resetResultsCount=()=>{i=0},c}function _e(e,...t){const r="function"==typeof e?{memoize:e,memoizeOptions:t}:e,n=(...e)=>{let t,n=0,o=0,i={},c=e.pop();"object"==typeof c&&(i=c,c=e.pop()),function(e,t="expected a function, instead received "+typeof e){if("function"!=typeof e)throw new TypeError(t)}(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const a={...r,...i},{memoize:s,memoizeOptions:u=[],argsMemoize:f=be,argsMemoizeOptions:l=[],devModeChecks:p={}}=a,d=ve(u),h=ve(l),y=function(e){const t=Array.isArray(e[0])?e[0]:e;return function(e,t="expected all items to be functions, instead received the following types: "){if(!e.every((e=>"function"==typeof e))){const r=e.map((e=>"function"==typeof e?`function ${e.name||"unnamed"}()`:typeof e)).join(", ");throw new TypeError(`${t}[${r}]`)}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}(e),m=s((function(){return n++,c.apply(null,arguments)}),...d),g=f((function(){o++;const e=function(e,t){const r=[],{length:n}=e;for(let o=0;o<n;o++)r.push(e[o].apply(null,t));return r}(y,arguments);return t=m.apply(null,e),t}),...h);return Object.assign(g,{resultFunc:c,memoizedResultFunc:m,dependencies:y,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>t,recomputations:()=>n,resetRecomputations:()=>{n=0},memoize:s,argsMemoize:f})};return Object.assign(n,{withTypes:()=>n}),n}var Ee,Oe=_e(be),Se=Object.assign(((e,t=Oe)=>{!function(e,t="expected an object, instead received "+typeof e){if("object"!=typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);const r=Object.keys(e);return t(r.map((t=>e[t])),((...e)=>e.reduce(((e,t,n)=>(e[r[n]]=t,e)),{})))}),{withTypes:()=>Se}),je=Oe((function(e){return e.chat.messages}),(function(e){return e.chat.searchTerm}),(function(e,t){return t?e.filter((function(e){return!(!e||"string"!=typeof e.message||"string"!=typeof e.nickname)&&(e.message.toLowerCase().includes(t.toLowerCase())||e.nickname.toLowerCase().includes(t.toLowerCase()))})):e}));function xe(e){return xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xe(e)}function Pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(r),!0).forEach((function(t){ke(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ke(e,t,r){return(t=function(e){var t=function(e){if("object"!=xe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=xe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==xe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Te(){Te=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},c=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var i=t&&t.prototype instanceof g?t:g,c=Object.create(i.prototype),a=new T(n||[]);return o(c,"_invoke",{value:x(e,r,a)}),c}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",m={};function g(){}function v(){}function w(){}var b={};u(b,c,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(N([])));E&&E!==r&&n.call(E,c)&&(b=E);var O=w.prototype=g.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,i,c,a){var s=l(e[o],e,i);if("throw"!==s.type){var u=s.arg,f=u.value;return f&&"object"==xe(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,a)}),(function(e){r("throw",e,c,a)})):t.resolve(f).then((function(e){u.value=e,c(u)}),(function(e){return r("throw",e,c,a)}))}a(s.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function x(t,r,n){var o=p;return function(i,c){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===i)throw c;return{value:e,done:!0}}for(n.method=i,n.arg=c;;){var a=n.delegate;if(a){var s=P(a,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var u=l(t,r,n);if("normal"===u.type){if(o=n.done?y:d,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=l(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var c=i.arg;return c?c.done?(r[t.resultName]=c.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[c];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(xe(t)+" is not iterable")}return v.prototype=w,o(O,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:v,configurable:!0}),v.displayName=u(w,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,u(e,s,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},S(j.prototype),u(j.prototype,a,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var c=new j(f(e,r,n,o),i);return t.isGeneratorFunction(r)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},S(O),u(O,s,"Generator"),u(O,c,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return a.type="throw",a.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var c=this.tryEntries[i],a=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var s=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(s&&u){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(s){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var c=i?i.completion:{};return c.type=e,c.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function Ne(e,t,r,n,o,i,c){try{var a=e[i](c),s=a.value}catch(e){return void r(e)}a.done?t(s):Promise.resolve(s).then(n,o)}function Le(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){Ne(i,n,o,c,a,"next",e)}function a(e){Ne(i,n,o,c,a,"throw",e)}c(void 0)}))}}!function(){var e=document.createElement("div");e.id="chat-container";var t=document.createElement("h1");t.textContent="Чат Приложение",e.appendChild(t);var r=document.createElement("div");r.id="messages",e.appendChild(r);var n=document.createElement("input");n.type="text",n.classList.add("inputVal"),n.id="nickname-input",n.placeholder="Введите никнейм...",e.appendChild(n);var o=document.createElement("input");o.type="text",o.classList.add("inputVal"),o.id="message-input",o.placeholder="Введите сообщение...",e.appendChild(o);var i=document.createElement("input");i.type="text",i.classList.add("inputVal"),i.id="search-input",i.placeholder="Поиск по сообщениям...",e.appendChild(i);var c=document.createElement("button");c.id="send-button",c.textContent="Отправить",e.appendChild(c),document.body.appendChild(e)}();var Re=le({name:"chat",initialState:{messages:[],users:[],error:null,searchTerm:""},reducers:{setMessages:function(e,t){e.messages=t.payload},addMessage:function(e,t){e.messages.push(t.payload)},setUsers:function(e,t){e.users=t.payload},setError:function(e,t){e.error=t.payload},searchMessage:function(e,t){e.searchTerm=t.payload}}}),Me=Re.actions,Ae=Me.setMessages,De=Me.addMessage,ze=(Me.setUsers,Me.setError,Me.searchMessage),Ie=function(e){const r=function(e){const{thunk:t=!0,immutableCheck:r=!0,serializableCheck:n=!0,actionCreatorCheck:o=!0}=e??{};let i=new re;return t&&("boolean"==typeof t?i.push(u):i.push(f(t.extraArgument))),i},{reducer:n,middleware:s,devTools:l=!0,preloadedState:p,enhancers:d}=e||{};let h,y;if("function"==typeof n)h=n;else{if(!i(n))throw new Error(he(1));h=function(e){const r=Object.keys(e),n={};for(let t=0;t<r.length;t++){const o=r[t];"function"==typeof e[o]&&(n[o]=e[o])}const i=Object.keys(n);let c;try{!function(e){Object.keys(e).forEach((r=>{const n=e[r];if(void 0===n(void 0,{type:o.INIT}))throw new Error(t(12));if(void 0===n(void 0,{type:o.PROBE_UNKNOWN_ACTION()}))throw new Error(t(13))}))}(n)}catch(e){c=e}return function(e={},r){if(c)throw c;let o=!1;const a={};for(let c=0;c<i.length;c++){const s=i[c],u=n[s],f=e[s],l=u(f,r);if(void 0===l)throw r&&r.type,new Error(t(14));a[s]=l,o=o||l!==f}return o=o||i.length!==Object.keys(e).length,o?a:e}}(n)}y="function"==typeof s?s(r):r();let m=a;l&&(m=ee({trace:!1,..."object"==typeof l&&l}));const g=function(...e){return r=>(n,o)=>{const i=r(n,o);let c=()=>{throw new Error(t(15))};const s={getState:i.getState,dispatch:(e,...t)=>c(e,...t)},u=e.map((e=>e(s)));return c=a(...u)(i.dispatch),{...i,dispatch:c}}}(...y),v=(e=>function(t){const{autoBatch:r=!0}=t??{};let n=new re(e);return r&&n.push(((e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let o=!0,i=!1,c=!1;const a=new Set,s="tick"===e.type?queueMicrotask:"raf"===e.type?"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:ie(10):"callback"===e.type?e.queueNotification:ie(e.timeout),u=()=>{c=!1,i&&(i=!1,a.forEach((e=>e())))};return Object.assign({},n,{subscribe(e){const t=n.subscribe((()=>o&&e()));return a.add(e),()=>{t(),a.delete(e)}},dispatch(e){try{return o=!e?.meta?.RTK_autoBatch,i=!o,i&&(c||(c=!0,s(u))),n.dispatch(e)}finally{o=!0}}})})("object"==typeof r?r:void 0)),n})(g);return c(h,p,m(..."function"==typeof d?d(v):v()))}({reducer:{chat:Re.reducer}});function Fe(){return Be.apply(this,arguments)}function Be(){return(Be=Le(Te().mark((function e(){var t,r,n,o;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://otus-js-chat-4ed79-default-rtdb.firebaseio.com/messages.json");case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("Network response was not ok");case 6:return e.next=8,t.json();case 8:return r=e.sent,n=Object.values(r).map((function(e){return Ce(Ce({},e),{},{date:e.date||(new Date).toISOString()})})),e.abrupt("return",n);case 13:return e.prev=13,e.t0=e.catch(0),console.error("Error fetching messages:",e.t0),o=e.t0 instanceof Error?e.t0.message:String(e.t0),Ie.dispatch(Re.actions.setError(null!=o?o:"Unknown error")),e.abrupt("return",[]);case 19:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function $e(e){return Ue.apply(this,arguments)}function Ue(){return Ue=Le(Te().mark((function e(t){var r,n=arguments;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:(new Date).toISOString(),e.prev=1,e.next=4,fetch("https://otus-js-chat-4ed79-default-rtdb.firebaseio.com/messages.json",{method:"POST",body:JSON.stringify(Ce(Ce({},t),{},{date:r})),headers:{"Content-Type":"application/json"}});case 4:if(e.sent.ok){e.next=7;break}throw new Error("Failed to send message");case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("Error sending message:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])}))),Ue.apply(this,arguments)}function We(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=document.getElementById("messages");r.innerHTML="",e.forEach((function(e){var n=new Date(e.date).toLocaleString(),o="string"==typeof e.message?e.message.replace(/XD/g,'<img src="'.concat(ge,'" alt=":-D" class="emoji ').concat(t&&e===t?"bouncing":"",'"/>')).replace(/:-\)/g,'<img src="'.concat(ye,'" alt=":-)" class="emoji ').concat(t&&e===t?"bouncing":"",'"/>')).replace(/:-\(/g,'<img src="'.concat(me,'" alt=":-(" class="emoji ').concat(t&&e===t?"bouncing":"",'"/>')):"",i=document.createElement("div");i.classList.add("message"),i.innerHTML='\n      <span class="nickname">'.concat(e.nickname,":</span>\n      <span>").concat(o,'</span>\n      <span class="date">').concat(n,"</span>\n    "),r.appendChild(i)})),r.scrollTop=r.scrollHeight}null===(Ee=document.getElementById("send-button"))||void 0===Ee||Ee.addEventListener("click",Le(Te().mark((function e(){var t,r,n,o;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("message-input"),r=document.getElementById("nickname-input"),n=t.value,o=r.value||"Anonymous",""!==n.trim()){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,$e({message:n,nickname:o,date:""});case 8:t.value="";case 9:case"end":return e.stop()}}),e)}))));var Xe=document.getElementById("search-input");function Ke(){return(Ke=Le(Te().mark((function e(){var t;return Te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe();case 2:t=e.sent,Ie.dispatch(Ae(t)),We(je(Ie.getState())),Ge((function(e){Ie.dispatch(De(e)),We(je(Ie.getState()),e)}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ge(e){new EventSource("https://otus-js-chat-4ed79-default-rtdb.firebaseio.com/messages.json").addEventListener("put",(function(t){var r=JSON.parse(t.data);e(r.data)}))}Xe.addEventListener("input",(function(){var e=Xe.value;Ie.dispatch(ze(e)),We(je(Ie.getState()))})),function(){Ke.apply(this,arguments)}()})();